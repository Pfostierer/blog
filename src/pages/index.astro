---
import Layout from "../layouts/Layout.astro";
import Card from "../components/Card.astro";
import { getAllPosts } from "../lib/wordpress/posts";
import { getUser } from "../lib/wordpress/users";
const posts = await getAllPosts();
---

<Layout title="Blog">
  <main>
    <h1 class="mx-8">Welcome to the FRG Blog</h1>
    <br />
    <ul role="list">
      {
        posts.map(async (post) => {
          const author = await getUser(post.author);
          return (
            <Card
              href={`/posts/${post.slug}`}
              title={post.title.rendered}
              body={`Written by ${author?.name}`}
            />
          );
        })
      }
    </ul>
  </main>
</Layout>
